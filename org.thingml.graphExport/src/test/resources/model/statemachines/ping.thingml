message ping();
message pong();

// Definition of the Pingable fragmant
thing Ping @c_code "generate"
{

	provided port PingPong {
		sends pong
		receives ping
	}
	
	statechart Ping init PP {

		state PP {
			
			on entry print "entry !"
			on exit error "should never exit"
		
			internal event PingPong?ping
			action do
				print "received ping"
				PingPong!pong()
				print "sent pong"
			end
		}
	}
}