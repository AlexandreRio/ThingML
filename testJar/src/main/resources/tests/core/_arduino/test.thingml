import "../test.thingml"

datatype double<4>
@c_type "double";

thing TestDumpArduino includes TestDump
@pim "TestArness"
@platform "arduino"
{
  property benchmark: Boolean = false
  property pStart: double = 0
  property pStop: double = 0

    statechart ArduinoHarness init Testing {
      property transitionsCount : Long = 0
      property stateNumber: String = ""

      state Testing {
        on entry do 
          'Serial.begin(9600);'
        end

        internal event m : dump?testOut
        action do 'Serial.println('&m.c&');'
        transitionsCount=transitionsCount+1
        end

        transition -> Failed 
        event dump?testFailure
        action '//printf("*FAILURE*");'

        transition -> End
        event dumpEnd?testEnd

      }

      state Failed {

      }

      state End {
        on entry do
        end
      }
    }
}
