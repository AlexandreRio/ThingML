import "thingml.thingml"

thing TestActionLanguage1 includes Test 
@test "x # x"
{
    property x : Integer = 0
  
    statechart TestActionLanguage1 init INIT {
        
    
    	state INIT {
			
		on entry do

		  x++
                  x--
                  if (x == 0) do
                     if (x >= 0) do
                        if (x <= 0) do
                            x = (x + 1) * 2 
                            x = x % 2
                            x = x / 2
                            while (x > 0) do
				harnessOut!testOut('\'a\'')
			    end
                        end else do
			  harnessOut!testOut('\'b\'')
			end
                     end else do
			harnessOut!testOut('\'c\'')
                     end
                  end else do
			harnessOut!testOut('\'d\'')
                  end

                end

    		transition -> STOP
			event m : harnessIn?testIn
			guard m.c == '\'x\'' and not (x > 0) and not (x < 0)
			action do
				    harnessOut!testOut('\'x\'')
	                end			  		

    		transition -> STOP
			event m : harnessIn?testIn
			guard m.c == '\'x\'' and x != 0
			action do
				    harnessOut!testOut('\'e\'')
	                end
    	}

	state STOP {

	}
    }
}
